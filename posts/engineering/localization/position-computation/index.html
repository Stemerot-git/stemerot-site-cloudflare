<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="UTF-8" />
  <title>Τεχνικές υπολογισμού της θέσης αντικειμένων - Stemerot</title>
  <link rel="icon" href="/img/stemerot-icon-circular.png">
  <meta name="description" content="Ποια είναι τα μαθηματικά πίσω από τον υπολογισμό της θέσης αντικειμένων, δηλαδή τεχνικών όπως αυτές που χρησιμοποιεί το GPS;" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  
  
  
  <link rel="stylesheet" href="/css/bundle.min.f2bca55e3d7e828153f1ba99817dbb3432451b6a6b3b73fdae7e38e2c66a3616.css" integrity="sha256-8rylXj1&#43;goFT8bqZgX27NDJFG2prO3P9rn444sZqNhY=">
  
  
</head>
<body>
  <header class="site-header">
  <div class="header-container">
    <a href="/">
      <div class="logo-wrapper">
        
        <div
          id="site-logo"
          class="stemerot-logo"
          role="img"
          aria-label="Stemerot logo"
        ></div>
    
        
        <span class="stemerot-title">Stemerot</span>
      </div>
    </a>
    
    <button id="menu-toggle" class="menu-toggle" aria-label="Toggle navigation">
      &#9776;
    </button>
    
    <nav id="main-nav" class="main-nav">
      <ul>
        <li><a href="/">Posts</a></li>
        <li><a href="/topics/">Topics</a></li>
        <li><a href="/eshop/">Shop</a></li>
        <li><a href="/courses/">Courses</a></li>
        <li><a href="/about/">About</a></li>
        <li class="mobile-search-container">
          <div class="search-bar mobile-search">
              <input class="search-input" type="search" placeholder="🔍 Αναζήτηση..." />
              <div class="search-results"></div>
          </div>
        </li>
      </ul>
    </nav>
    <div class="search-and-toggle">
      <div class="search-bar desktop-search">
        <input class="search-input" type="search" placeholder="🔍 Αναζήτηση..." />
        <div class="search-results"></div>
      </div>
      
      <button id="toggle-theme" aria-label="Toggle theme">◐</button>
    </div>
  </div>
</header>

  


<section class="adsense-section-small section-container">
    <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-5957385556386219"
        data-ad-slot="9876543210"
        data-ad-format="auto"
        data-full-width-responsive="true">
    </ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</section>

<main class="post-main-section">
  
  <div class="post-content">
    
    
      <div class="post-image">
        <img src="/img/posts/map-pins.webp" alt="Τεχνικές υπολογισμού της θέσης αντικειμένων">
      </div>
    

    <h1 class="post-title">Τεχνικές υπολογισμού της θέσης αντικειμένων</h1>

    
      <div class="post-summary">
        <p>Ποια είναι τα μαθηματικά πίσω από τον υπολογισμό της θέσης αντικειμένων, δηλαδή τεχνικών όπως αυτές που χρησιμοποιεί το GPS;</p>
      </div>
    

    <div class="post-meta">
      <div class="post-date-readtime">
        <span class="post-readtime">8 min read</span>
        <span> - </span>
        <span class="post-date">
            









17 Ιαν 2025

        </span>
      </div>
      <div class="post-share">
        <h3>Share: </h3>
        <a href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fstemerot.com%2fposts%2fengineering%2flocalization%2fposition-computation%2f" target="_blank">
            <img src="/img/social/facebook-icon.svg" alt="Share on Facebook">
          </a>
          <a href="https://x.com/intent/tweet?text=%CE%A4%CE%B5%CF%87%CE%BD%CE%B9%CE%BA%CE%AD%CF%82&#43;%CF%85%CF%80%CE%BF%CE%BB%CE%BF%CE%B3%CE%B9%CF%83%CE%BC%CE%BF%CF%8D&#43;%CF%84%CE%B7%CF%82&#43;%CE%B8%CE%AD%CF%83%CE%B7%CF%82&#43;%CE%B1%CE%BD%CF%84%CE%B9%CE%BA%CE%B5%CE%B9%CE%BC%CE%AD%CE%BD%CF%89%CE%BD&url=http%3a%2f%2fstemerot.com%2fposts%2fengineering%2flocalization%2fposition-computation%2f" target="_blank">
            <img src="/img/social/x-icon.svg" alt="Share on X">
          </a>
          <a href="https://www.linkedin.com/sharing/share-offsite/?url=http%3a%2f%2fstemerot.com%2fposts%2fengineering%2flocalization%2fposition-computation%2f" target="_blank">
            <img src="/img/social/linkedin-icon.svg" alt="Share on LinkedIn">
          </a>
      </div>
    </div>
    
    <div class="post-tags" style="margin-top: 0.1rem;">
      
        <a href="/tags/trilateration" class="tag" style="text-decoration: none;color:inherit">Trilateration</a>
      
        <a href="/tags/triangulation" class="tag" style="text-decoration: none;color:inherit">Triangulation</a>
      
        <a href="/tags/multilateration" class="tag" style="text-decoration: none;color:inherit">Multilateration</a>
      
    </div>
    

    <br>
    <hr>
    <br>
    

    <div class="post-content-body">
      <p>Το πρόβλημα υπολογισμού της θέσης πραγμάτων και προσώπων έχει απασχολήσει την ανθρωπότητα εδώ και εκατοντάδες χρόνια.</p>
<p>Από τους πρώτους θαλασσοπώρους και το πού βρίσκεται το καράβι τους στη μέση της θάλασσας, ώστε να ξέρουν προς ποια κατεύθυνση να στρέψουν τα πανιά, μέχρι και την εξερεύνηση του γαλαξία με διαστημικά μέσα όπως το Voyager.</p>
<p>Με ένα αρκετά κλασικό σύγχρονο παράδειγμα — που είδαμε σε προηγούμενο <a href="/posts/engineering/localization/localization-system">άρθρο</a> — να είναι αυτό του GPS.</p>
<p>Το GPS, όπως και άλλες τεχνολογίες, χρησιμοποιεί ηλεκτρομαγνητικά σήματα για να υπολογίσει την θέση, και ένα από τα πρώτα προβλήματα που πρέπει να λύσει πριν επιτύχει την εκτίμηση της τοποθεσίας, είναι να υπολογίσει αποστάσεις μεταξύ συσκευών. Τεχνικές σχετικά με αυτό είχαμε δει παλιότερα σε αυτό το <a href="/posts/engineering/localization/distance-angle-estimation">άρθρο</a>.</p>
<p>Με βάση τις πληροφορίες που έχουμε συλλέξει, θα προσπαθήσουμε πλέον να εκτιμήσουμε την θέση ενός node. Στην συνέχεια θα περιγράψουμε μεθόδους οι οποίες μπορούν να χρησιμοποιηθούν για να το επιτύχουν αυτό. Κύρια διαφορά τους είναι η απόδοση που μπορεί να έχουν, η οποία όμως σχετίζεται με την αύξηση της πολυπλοκότητας στους υπολογισμούς που θα χρειαστούν, καθώς επίσης και ποιες από τις παραπάνω πληροφορίες θα εκμεταλλευτούν.</p>
<p>
  Για την εύρεση της θέσης ενός unknown node στο τρισδιάστατο χώρο \(R^3\), το Minimal Required number of Sensors (MRS) είναι τέσσερα nodes. Στις παρακάτω περιγραφές όμως, και χωρίς βλάβη της γενικότητας θα χρησιμοποιηθούν τρία για την απλούστευση της περιγραφής - με απώτερο σκοπό την εύκολη κατανόηση της, με την παραδοχή ότι μας ενδιαφέρει η δισδιάστατη ανάλυση \(R^2\).
</p>
<hr>
<h2 id="trilateration">Trilateration</h2>
<p>
Η συγκεκριμένη μέθοδος είναι ίσως η πιο απλή διαισθητικά, βασίζεται στην γεωμετρία κύκλων, είναι αυτή που η ιδέα της χρησιμοποιείται από τα GPS για τον υπολογισμό θέσης, ενώ αξιοποιεί μόνο πληροφορία απόστασης και όχι γωνίας. Η εξίσωση ενός κύκλου από την γεωμετρία γνωρίζουμε ότι περιγράφεται από την παρακάτω εξίσωση όπου \((x_i,y_i)\) οι συντεταγμένες του κέντρο του κύκλου με ακτίνα \(r_i\).
</p>
<p>$$
(x-x_i)^2 + (y-y_i)^2 = r_i^2
$$</p>
<p>
Εάν χρησιμοποιούμε omnidirectional κεραίες ή στην γενικότερη περίπτωση το μοντέλο της isotropic antenna και υπολογίσουμε την απόσταση ενός beacon από το node στο οποίο θέλουμε να υπολογίσουμε την θέση του - τότε μπορούμε να συμπεράνουμε ότι το free node είναι κάπου πάνω στην περιφέρεια ενός κύκλου, με κέντρο το beacon και ακτίνα την απόσταση μεταξύ του beacon και του free node. Επαναλαμβάνοντας αυτό για ακόμα δύο beacons, τελικά το free node στο δισδιάστατο επίπεδο \(R^2\) θα πρέπει να βρίσκεται στην τομή των τριών κύκλων, πράγμα που γραφικά απεικονίζεται στην παρακάτω εικόνα:
</p>


<figure class="custom-figure" style="margin: 0; padding: 0; text-align: center;">
  
  <img src="/img/posts/thesis/transparent-Trilateration-ideal.webp" alt="Ideal Trilateration"  class="invert-in-dark" style="max-width:80%; display: block; margin: 0 auto;">
  
    <figcaption class="figure-caption" style="margin-top: 0.1em; font-size: 0.85em; color: #555;">
      Ideal Trilateration
    </figcaption>
  
</figure>
<p>Οι ακόλουθες εξισώσεις περιγράφουν πλήρως τους κύκλους του κάθε node.


<figure class="custom-figure" style="margin: 0; padding: 0; text-align: center;">
  
  <img src="/img/posts/localization/transparent-trilaterations-equations-circles.webp" alt="trilaterations equations circles"  class="invert-in-dark" style="max-width:80%; display: block; margin: 0 auto;">
  
</figure></p>
<p>
Όπου:
- \((x_i,y_i)\) το κέντρο του κύκλου για κάθε beacon \(i=1,2,3\)
- \(r_i\) η ακτίνα του κάθε beacon \(i=1,2,3\)
- \((x,y)\) οι συντεταγμένες του free nodes τις οποίες και ψάχνουμε. 
</p>
<p>Ένας τρόπος να υπολογίσουμε τις συντεταγμένες αυτές είναι να αφαιρέσουμε από την (3.13) την (3.12) και όμοια από την (3.14) την (3.13) ώστε να καταλήξουμε στις παρακάτω δύο εξισώσεις.</p>


<figure class="custom-figure" style="margin: 0; padding: 0; text-align: center;">
  
  <img src="/img/posts/localization/transparent-trilateration-equations-initial-system.webp" alt="trilateration equations initial system"  class="invert-in-dark" style="max-width:80%; display: block; margin: 0 auto;">
  
</figure>
<p>Ο λόγος που κάναμε το παραπάνω βήμα είναι διότι πλέον έχουμε ένα σύστημα με δύο εξισώσεις και δύο αγνώστους, οπότε μπορούμε εύκολα να θεωρήσουμε τους παρακάτω πίνακες.</p>


<figure class="custom-figure" style="margin: 0; padding: 0; text-align: center;">
  
  <img src="/img/posts/localization/transparent-trilateration-equations.webp" alt="trilateration equations system"  class="invert-in-dark" style="max-width:80%; display: block; margin: 0 auto;">
  
</figure>
<p>
Με την χρήση των οποίων καταλήγουμε ότι έχουμε να λύσουμε το γραμμικό σύστημα πινάκων που περιγράφεται από την τελική εξίσωση παρακάτω για τον υπολογισμό των συντεταγμένων \((x,y)\) του free node οι οποίες μας ενδιαφέρουν.
</p>
<p>$$
AX = B
$$</p>
<p>
Σε γενικές γραμμές, ο υπολογισμός όμως των αποστάσεων μπορεί να περιλαμβάνει μια μικρή απόκλιση \(\widehat{r_i} = r_i - ε\), με το \(ε\) συχνά να θεωρείται μία ανεξάρτητη κανονική τυχαία μεταβλητή με μηδενικό μέσο. Αυτό σημαίνει ότι τότε οι κύκλοι δεν έχουν ένα κοινό σημείο τομής, αλλά το free node βρίσκεται κάπου μέσα στο χωρίο επικάλυψης των τριών κύκλων, σχηματικά αυτό παρουσιάζεται εδώ:
</p>


<figure class="custom-figure" style="margin: 0; padding: 0; text-align: center;">
  
  <img src="/img/posts/thesis/transparent-Trilateration-actual.webp" alt="Realistic Trilateration"  class="invert-in-dark" style="max-width:80%; display: block; margin: 0 auto;">
  
    <figcaption class="figure-caption" style="margin-top: 0.1em; font-size: 0.85em; color: #555;">
      Realistic Trilateration
    </figcaption>
  
</figure>
<p>Σε αυτήν την περίπτωση καταλήγουμε σε ένα μη πεπερασμένο πλήθος λύσεων, με τη συνάρτηση του κάθε κύκλου να περιγράφεται από την εξίσωση:</p>
<p>$$
(x-x_i)^2 + (y-y_i)^2 = r_i^2-e
$$</p>
<p>
Το αρνητικό με αυτήν την μέθοδο, είναι η ανάγκη πραγματοποίησης floating point operations για τον υπολογισμό των συντεταγμένων \((x,y)\) σε πραγματικές συνθήκες - όπου το πλήθος των οποίων εξαρτάται από τον τρόπο που θα επιλέξουμε να επιλύσουμε το σύστημα. Μία από τις μεθόδους επίλυσης της γραμμικής εξίσωσης είναι μέσω του least square method, όπου τότε το πλήθος των floating point operations που απαιτούνται είναι \((m+\frac{n}{3})\cdot n^2\), με \(m\) τον αριθμό των αγνώστων και \(n\) τον αριθμό των δοθέντων εξισώσεων.
</p>
<hr>
<h2 id="bounding-box">Bounding Box</h2>
<p>
Σε αυτήν την μέθοδο χρησιμοποιούνται τετράγωνα αντί για κύκλους του Trilateration, ενώ και εδώ θεωρούμε \((x_i,y_i)\) τις συντεταγμένες των beacon και \(d_i\) η απόσταση που έχουμε υπολογίσει από το free node - για κάθε beacon \(i\). 
</p>
<p>
  Όμως σε αυτή την προσέγγιση δημιουργούμε τετράγωνα μήκος πλευράς \(2d_i\) με κέντρο το κέντρο του beacon και συντεταγμένες \((x_i - d_i, y_i - d_i)\) & \((x_i + d_i, y_i + d_i)\). 
</p>
<p>Θετικό πλέον είναι ότι δεν χρειάζεται να κάνουμε floating point operations για τον υπολογισμό του χωρίου τομής - αλλά μπορούμε να το υπολογίσουμε με απλή γεωμετρία. Αφού έχουμε υπολογίσει το χωρίο τομής των τετραγώνων μπορούμε να θεωρήσουμε ότι στο κέντρο του βρίσκεται το free node.</p>


<figure class="custom-figure" style="margin: 0; padding: 0; text-align: center;">
  
  <img src="/img/posts/thesis/transparent-Bounding-box.webp" alt="Bounding box"  class="invert-in-dark" style="max-width:80%; display: block; margin: 0 auto;">
  
    <figcaption class="figure-caption" style="margin-top: 0.1em; font-size: 0.85em; color: #555;">
      Bounding box
    </figcaption>
  
</figure>
<p>Η συγκεκριμένη μέθοδος μπορεί να είναι ευκολότερη υπολογιστικά και να απαιτεί λιγότερα processor resources από το Trilateration, όμως ταυτόχρονα  προκύπτει και μεγαλύτερο σφάλμα απόκλισης.</p>
<hr>
<h2 id="triangulation">Triangulation</h2>
<p>Σε αντίθεση με τις παραπάνω μεθόδους, η τεχνική Triangulation εκτιμάει την θέση του node που μας ενδιαφέρει, χρησιμοποιώντας γνώση που έχουμε για γωνίες και όχι εκτίμηση της απόστασης. Ένα απλούστερο παράδειγμα παρουσιάζεται εδώ:</p>


<figure class="custom-figure" style="margin: 0; padding: 0; text-align: center;">
  
  <img src="/img/posts/thesis/transparent-Tringulation-principle.webp" alt="Principles of Triangulation"  class="invert-in-dark" style="max-width:80%; display: block; margin: 0 auto;">
  
    <figcaption class="figure-caption" style="margin-top: 0.1em; font-size: 0.85em; color: #555;">
      Principles of Triangulation
    </figcaption>
  
</figure>
<p>
  Όπου σε αυτό το παράδειγμα από την τριγωνομετρία, μπορούμε εύκολα να συμπεράνουμε ότι για τις γωνίες \(\theta_1\) και \(\theta_2\) ισχύουν οι σχέσεις:
</p>
<p>$$
\theta_1 = \frac{d}{d_1} = tan^{-1}\left(\frac{y_1-y}{x_1-x}\right)
$$
$$
\theta_2 = \frac{d}{d_2} = tan^{-1}\left(\frac{y_2-y}{x_2-x}\right)
$$</p>
<p>
Από τις σχέσεις αυτές μπορούμε να καταλήξουμε στις παρακάτω δύο σχέσεις, μέσω των οποίων τελικά για δεδομένες θέσεις των beacon - γνωστά δηλαδή τα \((x_i,y_i)\) για κάθε beacon i - και με βάση την μέτρηση των γωνιών \(\theta_1\) και \(\theta_2\), να είμαστε σε θέση να υπολογίσουμε την θέση του free node \((x,y)\).
</p>
<p>$$
x = \frac{y_2 - y_1-  x_2\tan \theta_2 + x_1\tan \theta_1}{\tan \theta_1 - \tan \theta_2}
$$
$$
y = x\tan \theta_1 + y_1 - x_1\tan \theta_1
$$
$$
y = x\tan \theta_2 + y_2 - x_2\tan \theta_2
$$</p>
<p>Δεν είναι κάπως μαγικό; Πώς όλα αυτά μπορούν να συνδυαστούν; Από τη μέτρηση γωνιών που κάνουμε σε κεραίες, τελικά, μπορούμε να υπολογίσουμε την θέση ενός άγνωστου αντικειμένου στον χώρο.</p>
<p>Αυτή η τεχνική εκτίμησης της θέσης του node, μπορεί να γίνει είτε από τοπικές μετρήσεις του ίδιου του node.


<figure class="custom-figure" style="margin: 0; padding: 0; text-align: center;">
  
  <img src="/img/posts/thesis/transparent-Tringulation-local.webp" alt="Local Tringulation"  class="invert-in-dark" style="max-width:80%; display: block; margin: 0 auto;">
  
    <figcaption class="figure-caption" style="margin-top: 0.1em; font-size: 0.85em; color: #555;">
      Local Tringulation
    </figcaption>
  
</figure></p>
<p>Είτε από μετρήσεις γωνιών που κάνουν τα anchors.


<figure class="custom-figure" style="margin: 0; padding: 0; text-align: center;">
  
  <img src="/img/posts/thesis/transparent-Tringulation-remote.webp" alt="Remote Ideal Tringulation"  class="invert-in-dark" style="max-width:80%; display: block; margin: 0 auto;">
  
    <figcaption class="figure-caption" style="margin-top: 0.1em; font-size: 0.85em; color: #555;">
      Remote Ideal Tringulation
    </figcaption>
  
</figure></p>
<p>Φυσικά σε μία πραγματική εφαρμογή, όπως έχει αναφερθεί παραπάνω, οι μετρήσεις παρουσιάζουν αποκλίσεις από τα ιδανικά μοντέλα. Συνεπώς σε πιο ρεαλιστικά επίπεδα - συνυπολογίζοντας την ύπαρξη των αποκλίσεων - το χωρίο στο οποίο με μεγαλύτερη πιθανότητα βρίσκεται το node παρουσιάζεται στο εξής παράδειγμα.


<figure class="custom-figure" style="margin: 0; padding: 0; text-align: center;">
  
  <img src="/img/posts/thesis/transparent-Tringulation-remote-actual.webp" alt="Realistic Tringulation"  class="invert-in-dark" style="max-width:80%; display: block; margin: 0 auto;">
  
    <figcaption class="figure-caption" style="margin-top: 0.1em; font-size: 0.85em; color: #555;">
      Realistic Tringulation
    </figcaption>
  
</figure></p>
<hr>
<h2 id="multilateration">Multilateration</h2>
<p>Η μέθοδος του Multilateration (MLAΤ) (κάποιες φορές ο όρος αυτός χρησιμοποιείται επίσης σε αναφορά της χρήσης του Trilateration ή του Triangulation με πάνω από 3 beacons) έχει ως βάση την γεωμετρία των υπερβολικών καμπύλων και συχνά μπορεί να βρεθεί επίσης και ως hyperbolic positioning  την βιβλιογραφία. Σε προηγούμενο <a href="/posts/engineering/localization/distance-angle-estimation">άρθρο</a> έγινε αναφορά ότι η χρήση του TDoA βασίζεται στις υπερβολικές καμπύλες, συνεπώς μπορούμε εύκολα να χρησιμοποιήσουμε τις μετρήσεις αυτές για τον υπολογισμό της θέσης του free node.</p>
<p>
  Η γενική ιδέα σε αυτήν την περίπτωση περιγράφεται στην παρακάτω εξίσωση - και αυτό που θέλουμε, είναι να υπολογίσουμε την θέση του \(k_t\) (free node) γνωρίζοντας για κάθε δύο διαφορετικά \(k_i\) και \(k_j\) beacon nodes την χρονική στιγμή \(t_i\) και \(t_j\) που έφτασε το σήμα στο καθένα - εάν αυτό κινούταν με ταχύτητα s και το ‖·‖ συμβολίζει την ευκλείδεια απόσταση μεταξύ τους.
</p>


<figure class="custom-figure" style="margin: 0; padding: 0; text-align: center;">
  
  <img src="/img/posts/localization/transparent-multilateration-equation.png" alt="Position Computation Summary"  class="invert-in-dark" style="max-width:80%; display: block; margin: 0 auto;">
  
    <figcaption class="figure-caption" style="margin-top: 0.1em; font-size: 0.85em; color: #555;">
      Position Computation Summary
    </figcaption>
  
</figure>
<p>Αυτό που αναπαριστά ουσιαστικά η σχέση αυτή δεν είναι τίποτα άλλο από την προσπάθεια εύρεσης του σημείου τομής των καμπύλων. Για να το καταλάβουμε καλύτερα, ας δούμε αυτό το παράδειγμα.</p>


<figure class="custom-figure" style="margin: 0; padding: 0; text-align: center;">
  
  <img src="/img/posts/thesis/transparent-multilateration.webp" alt="Realistic Tringulation"  class="invert-in-dark" style="max-width:80%; display: block; margin: 0 auto;">
  
    <figcaption class="figure-caption" style="margin-top: 0.1em; font-size: 0.85em; color: #555;">
      Realistic Tringulation
    </figcaption>
  
</figure>
<hr>
<h2 id="πιθανοκρατικοί-μέθοδοι">Πιθανοκρατικοί μέθοδοι</h2>
<p>Το γεγονός ότι οι μετρήσεις απόστασης και γωνίας σε πραγματικές συνθήκες εμπεριέχουν σφάλματα, έχει ωθήσει στην έρευνα probabilistic μεθόδων εκτίμησης τοποθεσίας των free nodes.</p>
<p>Αυτού του τύπου οι προσεγγίσεις λαμβάνουν υπόψιν τα μετρικά σφάλματα και συχνά τα μοντελοποιούν ως κανονικές τυχαίες μεταβλητές. Το μεγάλο μειονέκτημα σε αυτήν την μέθοδο είναι τα μεγάλα υπολογιστικά και χωρικά - για την αποθήκευση των δεδομένων - κόστη.</p>
<hr>
<p>Ας συνοψίσουμε τι είδαμε σε αυτό το άρθρο και ας συνδυάσουμε ταυτόχρονα και προηγούμενη γνώση, χρησιμοποιώντας τον παρακάτω πίνακα:</p>


<figure class="custom-figure" style="margin: 0; padding: 0; text-align: center;">
  
  <img src="/img/posts/localization/transparent-recap-position-computation.webp" alt="Position Computation Summary"  class="invert-in-dark" style="max-width:80%; display: block; margin: 0 auto;">
  
    <figcaption class="figure-caption" style="margin-top: 0.1em; font-size: 0.85em; color: #555;">
      Position Computation Summary
    </figcaption>
  
</figure>
<p>Όπως είδαμε σε προηγούμενο άρθρο, πριν χρησιμοποιήσουμε κάποιον από τους αλγόριθμους που είδαμε σήμερα, είναι σημαντικό να έχουμε υπολογίσει τις αποστάσεις ή τις γωνίες μεταξύ των σημείων αναφοράς του συστήματός μας.</p>
<p>Κάποια σημεία είναι σημαντικό να ξέρουμε πού βρίσκονται, και με τις μετρήσεις—ακολουθώντας συγκεκριμένους αλγόριθμους—μπορούμε στη συνέχεια να εκτιμήσουμε την θέση άγνωστων αντικειμένων.</p>
<p>Αν μας ενδιαφέρει να βρούμε, μέσω κάμερας, την θέση των αντικειμένων στο τρισδιάστατο επίπεδο, μπορούμε να συνεχίσουμε την ανάγνωση μας σε αυτό το <a href="/posts/engineering/localization/camera-pose-estimation">άρθρο</a>.</p>
<p>Ενώ, αν θέλουμε να εμβαθύνουμε περισσότερο σε λεπτομέρειες σχετικά με τους αλγόριθμους που σχετίζονται με το localization, μπορούμε να διαβάσουμε <a href="/posts/engineering/localization/localization-algorithms">αυτό</a>.</p>
<h2 id="-παραπομπές">🔗 Παραπομπές</h2>
<p>[1] Christos Spyridakis, &ldquo;Design and implementation of a low cost embedded system for localization of drones flying in swarms&rdquo;, Diploma Work, School of Electrical and Computer Engineering, Technical University of Crete, Chania, Greece, 2022 <a href="https://doi.org/10.26233/heallink.tuc.91531">https://doi.org/10.26233/heallink.tuc.91531</a></p>
<p>* Όλες οι παραπομπές υπάρχουν αναλυτικά στο παραπάνο Thesis.</p>

    </div>

    <br>
    <br>

    
    
    <div class="post-author">
    <h3>Σχετικά με τον αρθρογράφο</h3>
    
    
        <div class="author-single">
        <div class="author-image">
          <a href="/author/cspyridakis/" style="text-decoration: none;color:inherit">
            <img src="/img/authors/cspyridakis.webp" alt="Χρήστος Σπυριδάκης">
          </a>
        </div>
        <div class="author-info">
          <a href="/author/cspyridakis/" style="text-decoration: none;color:inherit">
            <h4>Χρήστος Σπυριδάκης</a></h4>
          </a>
          <p>Ο Χρήστος είναι ο ιδρυτής του Stemerot, ένας μηχανικός με αγάπη για θέματα που αφορούν τον ευρύτερο κλάδο του STEM και του αρέσει να ασχολείται συνέχεια με νέες τεχνολογίες.</p>
        </div>
        <div class="author-single-social">
            
              <a href="https://www.linkedin.com/in/cspyridakis/" target="_blank">
                <img src="/img/social/linkedin-icon.svg" alt="LinkedIn">
              </a>
            
            
              <a href="https://github.com/CSpyridakis" target="_blank">
                <img src="/img/social/github-icon.svg" alt="Github">
              </a>
            
            
              <a href="https://www.instagram.com/cspyridakis/" target="_blank">
                <img src="/img/social/instagram-icon.svg" alt="Instagram">
              </a>
            
            
              <a href="https://www.facebook.com/cspyridakis/" target="_blank">
                <img src="/img/social/facebook-icon.svg" alt="Facebook">
              </a>
            
            
              <a href="https://x.com/ChSpyridakis" target="_blank">
                <img src="/img/social/x-icon.svg" alt="X">
              </a>
            
          </div>
        </div>
    
</div>

    
  </div>

  
  <aside class="sidebar">
    <section class="recent-posts">
    <section class="recent-section">
        <h2>Πρόσφατα</h2>
        
            

<article class="post">
    
    
        <a href="http://stemerot.com/posts/science/music-and-math/">
        <img src="/img/posts/thumbnails/piano-img.webp" alt="Είναι τελικά η Μουσική η αριθμητική των ήχων;">
        </a>
    

    
    <div class="post-info">

        
        <p class="post-date">
              









13 Φεβ 2025

            -
            
                Μαρία Ευαγγελινού
            
        </p>

        
        <h3 class="post-title">
        <a href="http://stemerot.com/posts/science/music-and-math/" style="text-decoration: none; color: inherit;">
            Είναι τελικά η Μουσική η αριθμητική των ήχων;
        </a>
        </h3>

        
        
        <p class="post-summary">Μπορούν τα μαθηματικά να εξηγήσουν άραγε την μουσική; Είναι η μουσική μία εξίσωση μαθηματικών;</p>
        

        
        
        <div class="post-tags">
            
            <a href="/tags/music" 
                class="tag" 
                style="text-decoration: none; color: inherit;">
                Music
            </a>
            
            <a href="/tags/maths" 
                class="tag" 
                style="text-decoration: none; color: inherit;">
                Maths
            </a>
            
        </div>
        

    </div>
</article>
        
            

<article class="post">
    
    
        <a href="http://stemerot.com/posts/technology/ai/llms-deepseek/">
        <img src="/img/posts/deepseek.webp" alt="Τι είναι το Deepseek;">
        </a>
    

    
    <div class="post-info">

        
        <p class="post-date">
              









04 Φεβ 2025

            -
            
                Χρήστος Σπυριδάκης
            
        </p>

        
        <h3 class="post-title">
        <a href="http://stemerot.com/posts/technology/ai/llms-deepseek/" style="text-decoration: none; color: inherit;">
            Τι είναι το Deepseek;
        </a>
        </h3>

        
        
        <p class="post-summary">Τα LLMs είναι μοντέλα τεχνητής νοημοσύνης. Είναι, όμως, επικίνδυνα;</p>
        

        
        
        <div class="post-tags">
            
            <a href="/tags/ai" 
                class="tag" 
                style="text-decoration: none; color: inherit;">
                AI
            </a>
            
            <a href="/tags/llm" 
                class="tag" 
                style="text-decoration: none; color: inherit;">
                LLM
            </a>
            
        </div>
        

    </div>
</article>
        
    </section>

    
<section class="adsense-section section-container">
    <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-5957385556386219"
        data-ad-slot="9876543210"
        data-ad-format="auto"
        data-full-width-responsive="true">
    </ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</section>

    <section class="popular-tags">
        <h2>Popular Tags</h2>
        <div class="tags">
            
            
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
            
            
            
            
                
                <a href="http://stemerot.com/tags/gps/" class="tag" style="text-decoration: none; color: inherit">
                    GPS
                </a>
            
                
                <a href="http://stemerot.com/tags/ai/" class="tag" style="text-decoration: none; color: inherit">
                    AI
                </a>
            
                
                <a href="http://stemerot.com/tags/camera/" class="tag" style="text-decoration: none; color: inherit">
                    Camera
                </a>
            
                
                <a href="http://stemerot.com/tags/dunning-kruger/" class="tag" style="text-decoration: none; color: inherit">
                    Dunning Kruger
                </a>
            
                
                <a href="http://stemerot.com/tags/encryption/" class="tag" style="text-decoration: none; color: inherit">
                    Encryption
                </a>
            
                
                <a href="http://stemerot.com/tags/linux/" class="tag" style="text-decoration: none; color: inherit">
                    Linux
                </a>
            
                
                <a href="http://stemerot.com/tags/llm/" class="tag" style="text-decoration: none; color: inherit">
                    LLM
                </a>
            
                
                <a href="http://stemerot.com/tags/mac/" class="tag" style="text-decoration: none; color: inherit">
                    Mac
                </a>
            
                
                <a href="http://stemerot.com/tags/maths/" class="tag" style="text-decoration: none; color: inherit">
                    Maths
                </a>
            
                
                <a href="http://stemerot.com/tags/multilateration/" class="tag" style="text-decoration: none; color: inherit">
                    Multilateration
                </a>
            
        </div>
    </section>
</section>
  </aside>
</main>


<section class="adsense-section section-container">
    <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-5957385556386219"
        data-ad-slot="9876543210"
        data-ad-format="auto"
        data-full-width-responsive="true">
    </ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</section>


<section class="all-posts-section section-container">
    <h2>Πρόσφατα Άρθρα</h2>
    <div class="all-posts-grid">
        
        
        
            <article class="post">
                <a href="http://stemerot.com/posts/science/music-and-math/">
                    <img src="/img/posts/thumbnails/piano-img.webp" alt="Είναι τελικά η Μουσική η αριθμητική των ήχων;">
                </a>
                <div class="post-info">
                    <p class="post-date">
                          









13 Φεβ 2025

                        -
                        
                            Μαρία Ευαγγελινού
                        
                    </p>
                    <h3 class="post-title">Είναι τελικά η Μουσική η αριθμητική των ήχων;</h3>
                    <p class="post-summary">Μπορούν τα μαθηματικά να εξηγήσουν άραγε την μουσική; Είναι η μουσική μία εξίσωση μαθηματικών;</p>
                    <div class="post-tags">
                        
                        <a href="/tags/music" class="tag" style="text-decoration: none;color:inherit">Music</a>
                        
                        <a href="/tags/maths" class="tag" style="text-decoration: none;color:inherit">Maths</a>
                        
                    </div>
                </div>
            </article>
        
            <article class="post">
                <a href="http://stemerot.com/posts/technology/ai/llms-deepseek/">
                    <img src="/img/posts/deepseek.webp" alt="Τι είναι το Deepseek;">
                </a>
                <div class="post-info">
                    <p class="post-date">
                          









04 Φεβ 2025

                        -
                        
                            Χρήστος Σπυριδάκης
                        
                    </p>
                    <h3 class="post-title">Τι είναι το Deepseek;</h3>
                    <p class="post-summary">Τα LLMs είναι μοντέλα τεχνητής νοημοσύνης. Είναι, όμως, επικίνδυνα;</p>
                    <div class="post-tags">
                        
                        <a href="/tags/ai" class="tag" style="text-decoration: none;color:inherit">AI</a>
                        
                        <a href="/tags/llm" class="tag" style="text-decoration: none;color:inherit">LLM</a>
                        
                    </div>
                </div>
            </article>
        
            <article class="post">
                <a href="http://stemerot.com/posts/engineering/drones/">
                    <img src="/img/posts/drone-mini.webp" alt="Μη επανδρωμένα οχήματα">
                </a>
                <div class="post-info">
                    <p class="post-date">
                          









21 Ιαν 2025

                        -
                        
                            Χρήστος Σπυριδάκης
                        
                    </p>
                    <h3 class="post-title">Μη επανδρωμένα οχήματα</h3>
                    <p class="post-summary">Ποιες είναι οι διάφορες κατηγορίες drones και μπορούν να χρησιμοποιηθούν για κάτι πέρα από τη λήψη βίντεο;</p>
                    <div class="post-tags">
                        
                        <a href="/tags/uav" class="tag" style="text-decoration: none;color:inherit">UAV</a>
                        
                        <a href="/tags/vtol" class="tag" style="text-decoration: none;color:inherit">VTOL</a>
                        
                    </div>
                </div>
            </article>
        
            <article class="post">
                <a href="http://stemerot.com/posts/psychology/stupid-people/">
                    <img src="/img/posts/person-think.webp" alt="Μήπως όλοι σκεφτόμαστε με χαζό τρόπο;">
                </a>
                <div class="post-info">
                    <p class="post-date">
                          









21 Ιαν 2025

                        -
                        
                            Χρήστος Σπυριδάκης
                        
                    </p>
                    <h3 class="post-title">Μήπως όλοι σκεφτόμαστε με χαζό τρόπο;</h3>
                    <p class="post-summary">Είναι ένα άτομο με υψηλό IQ έξυπνο σε όλους τους τομείς της ζωής του;</p>
                    <div class="post-tags">
                        
                        <a href="/tags/dunning-kruger" class="tag" style="text-decoration: none;color:inherit">Dunning Kruger</a>
                        
                    </div>
                </div>
            </article>
        
            <article class="post">
                <a href="http://stemerot.com/posts/technology/os/pc-vs-mac-vs-linux/">
                    <img src="/img/posts/laptop-and-code.webp" alt="Η μεγάλη μάχη των λειτουργικών συστημάτων">
                </a>
                <div class="post-info">
                    <p class="post-date">
                          









20 Ιαν 2025

                        -
                        
                            Χρήστος Σπυριδάκης
                        
                    </p>
                    <h3 class="post-title">Η μεγάλη μάχη των λειτουργικών συστημάτων</h3>
                    <p class="post-summary">Ποιο λειτουργικό είναι καλύτερο να χρησιμοποιείς;</p>
                    <div class="post-tags">
                        
                        <a href="/tags/os" class="tag" style="text-decoration: none;color:inherit">OS</a>
                        
                        <a href="/tags/mac" class="tag" style="text-decoration: none;color:inherit">Mac</a>
                        
                        <a href="/tags/linux" class="tag" style="text-decoration: none;color:inherit">Linux</a>
                        
                        <a href="/tags/windows" class="tag" style="text-decoration: none;color:inherit">Windows</a>
                        
                    </div>
                </div>
            </article>
        
            <article class="post">
                <a href="http://stemerot.com/posts/engineering/security/tee/">
                    <img src="/img/posts/lock-digital.webp" alt="Ασφάλεια στην εκτέλεση προγραμμάτων">
                </a>
                <div class="post-info">
                    <p class="post-date">
                          









19 Ιαν 2025

                        -
                        
                            Χρήστος Σπυριδάκης
                        
                    </p>
                    <h3 class="post-title">Ασφάλεια στην εκτέλεση προγραμμάτων</h3>
                    <p class="post-summary">Πώς μπορούν οι εφαρμογές να εκτελούνται με ασφάλεια στις συσκευές, ακόμη και αν αυτές έχουν παραβιαστεί;</p>
                    <div class="post-tags">
                        
                        <a href="/tags/tee" class="tag" style="text-decoration: none;color:inherit">TEE</a>
                        
                        <a href="/tags/encryption" class="tag" style="text-decoration: none;color:inherit">Encryption</a>
                        
                    </div>
                </div>
            </article>
        
    </div>
</section>


<section class="section-about">
    <div class="about-container">
        <h2>Το όραμα μας</h2>
        <p style="text-align: justify;">
            Η ομάδα του Stemerot έχει ως όραμα να εμπνεύσει και να ενδυναμώσει τα άτομα στον κόσμο 
            της τεχνολογίας και της καινοτομίας. Στόχος μας είναι να καλλιεργήσουμε μια κοινότητα όπου 
            η γνώση μοιράζεται και η περιέργεια ανταμείβεται. 
        </p>
        <h2>Οι στόχοι μας</h2>
        <p style="text-align: justify;">
            Να παρέχουμε προσιτό, ελκυστικό και ενημερωμένο περιεχόμενο, το οποίο, με απλό και κατανοητό 
            τρόπο, ενημερώνει και συμβάλλει στη μείωση του χάσματος μεταξύ αρχαρίων και ειδικών στα πεδία STEM. 
        </p>
    </div>
</section>


<section class="newsletter-section">
    <div class="newsletter-container">
        <h2>Εγγραφείτε στο Newsletter!</h2>
        <p>Θέλεις να μην χάνεις κανένα νέο από την κοινότητα του Stemerot.</p>
        <p>Κάνε εγγραφή στο newsletter μας, και κάθε εβδομάδα θα σου στέλνουμε ένα e-mail με όλα τα νέα που έχουμε.</p>
        <form class="newsletter-form" action="https://usebasin.com/f/3885f27a614d" method="POST" enctype="multipart/form-data" id="form">
            <label for="newsletter-first-name">Όνομα</label>
            <input 
                type="text" 
                id="newsletter-first-name" 
                name="newsletter-first-name" 
                placeholder="First Name"
            />

            <label for="newsletter-lastname">Επώνυμο</label>
            <input 
                type="text" 
                id="newsletter-lastname" 
                name="newsletter-lastname" 
                placeholder="Last Name"
            />

            <label for="newsletter-email">Email *</label>
            <input 
                type="email" 
                id="newsletter-email" 
                name="newsletter-email" 
                placeholder="Email Address" 
                required 
            />

            
            <div style="text-align: justify;">
                <input
                    type="checkbox"
                    id="newsletter-terms-agreement"
                    name="newsletter-terms-agreement"
                    required
                />
                <label for="newsletter-terms-agreement">
                    Συμφωνώ να λαμβάνω ενημερωτικά δελτία (newsletters) από την κοινότητα 
                    Stemerot και παρέχω τη συγκατάθεσή μου για την επεξεργασία των 
                    προσωπικών μου δεδομένων για σκοπούς ενημέρωσης και προώθησης όπως περιγράφεται στην
                    <a href="/privacy/" style="color: inherit;" target="_blank">Πολιτική Απορρήτου</a>.
                </label>
            </div>

            <br>

            <div>
                <label for="contact-agreement-notes">
                   * Οποιαδήποτε στιγμή επιθυμείτε να σταματήσετε να λαμβάνεται ενημερωτικό υλικό από το Stemerot, στείλτε ένα μήνυμα με το αίτημα σας στο <a href="mailto:admin@stemerot.com" style="color:inherit">admin@stemerot.com</a>.
                </label>
            </div>

            <button type="submit">Εγγραφή</button>
        </form>
    </div>
</section>




<script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>



  <footer class="site-footer">
  <div class="footer-container">
    <div class="footer-links">
      <h3>Σχετικά με εμάς</h3>
      <ul>
        <li><a href="/about/">Ποιοί είμαστε;</a></li>
        <li><a href="/authors/">Αρθρογράφοι</a></li>
      </ul>
    </div>
    <div class="footer-links">
      <h3>Ακολούθησε μας</h3>
      <ul class="footer-icons-ul">
        <li><a href="https://www.linkedin.com/groups/10055272/"><img class="footer-icons" src="/img/social/linkedin-icon.svg" alt="Linkedin icon"/></a></li>
        <li><a href="https://www.facebook.com/profile.php?id=100090351596163"><img class="footer-icons" src="/img/social/facebook-icon.svg" alt="Facebook icon"/></a></li>
        <li><a href="https://x.com/stemerot"><img class="footer-icons" src="/img/social/x-icon.svg" alt="X icon"/></a></li>
        <li><a href="https://www.instagram.com/stemerot/"><img class="footer-icons" src="/img/social/instagram-icon.svg" alt="Instagram icon"/></a></li>
        <li><a href="https://open.spotify.com/user/31v3opcsq57nt4eg4hsbm5s6nfny"><img class="footer-icons" src="/img/social/spotify-icon.svg" alt="Spotify icon"/></a></li>
        <li><a href="https://discord.gg/M7c22wa7"><img class="footer-icons" src="/img/social/discord-icon.svg" alt="Spotify icon"/></a></li>
        <li><a href="https://www.youtube.com/@stemerot"><img class="footer-icons" src="/img/social/youtube-icon.svg" alt="Youtube icon"/></a></li>
      </ul>
    </div>
    <div class="footer-links">
      <h3>Επικοινωνία</h3>
      <ul>
        <li><a href="mailto:info@stemerot.com">E-mail</a></li>
        <li><a href="/faq/">FAQ</a></li>
        <li><a href="/privacy">Πολιτική Απορρήτου</a></li>
      </ul>
    </div>
  </div>
  <div class="copyright">
    Stemerot &copy; 2025. All rights reserved.
  </div>
</footer>
  <div id="cookie-consent-banner" class="cookie-banner" style="display: none;">
  <p>
    Χρησιμοποιούμε cookies για να βελτιώσουμε την εμπειρία σας, να εμφανίζουμε εξατομικευμένες διαφημίσεις και να αναλύουμε την κίνηση. 
    Για περισσότερες λεπτομέρειες σχετικά με τη διαχείριση των προσωπικών σας δεδομένων, δείτε την 
    <a href="/privacy/" style="color: inherit;" target="_blank">Πολιτική Απορρήτου</a>.
  </p>
  <button id="accept-all-cookies">Αποδοχή όλων</button>
  <button id="accept-mandatory-cookies">Αποδοχή μόνο των απαραίτητων</button>
</div>

  
<script>


window.addEventListener('DOMContentLoaded', function() {
    var cookieConsent = localStorage.getItem('cookieConsent');
    var banner = document.getElementById('cookie-consent-banner');

    
    if (!cookieConsent) {
        banner.style.display = 'block';
        } else if (cookieConsent === 'accepted-all') {
           
        loadGoogleAnalytics();
        loadGoogleAdSense();
    }
});

    
    document.getElementById('accept-all-cookies').addEventListener('click', function() {
        localStorage.setItem('cookieConsent', 'accepted-all');
    document.getElementById('cookie-consent-banner').style.display = 'none';

    
    loadGoogleAnalytics();
    loadGoogleAdSense();
});

    
    document.getElementById('accept-mandatory-cookies').addEventListener('click', function() {
        localStorage.setItem('cookieConsent', 'accepted-mandatory');
    document.getElementById('cookie-consent-banner').style.display = 'none';

        
});



function loadGoogleAnalytics() {
    var gaScript = document.createElement('script');
    gaScript.async = true;
    gaScript.src = 'https://www.googletagmanager.com/gtag/js?id=G-2JQ9H53HHS';
    document.head.appendChild(gaScript);

    gaScript.onload = function() {
        window.dataLayer = window.dataLayer || [];
        function gtag(){ dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-2JQ9H53HHS', { 'anonymize_ip': true });
    };
}



function loadGoogleAdSense() {
    var adsScript = document.createElement('script');
    adsScript.async = true;
    adsScript.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5957385556386219';
    adsScript.crossorigin = 'anonymous';
    document.head.appendChild(adsScript);
}
</script>
  <script>

document.getElementById('menu-toggle').addEventListener('click', function () {
    const nav = document.getElementById('main-nav');
    nav.classList.toggle('active'); 
});


document.addEventListener('click', function(e) {
    const nav = document.getElementById('main-nav');
    const menuToggle = document.getElementById('menu-toggle');
    
    if (nav.classList.contains('active') && 
        !nav.contains(e.target) && 
        !menuToggle.contains(e.target)) {
        nav.classList.remove('active');
    }
});

let lastScrollPosition = 0;
const header = document.querySelector('.site-header');

window.addEventListener('scroll', () => {
    const currentScrollPosition = window.scrollY;

    if (currentScrollPosition > lastScrollPosition && currentScrollPosition > 100) {
        
        header.style.transform = 'translateY(-100%)';
    } else {
        
        header.style.transform = 'translateY(0)';
    }

    lastScrollPosition = currentScrollPosition;
});
</script>

<script>

const themeToggleBtn = document.getElementById("toggle-theme");
const currentTheme = localStorage.getItem("theme");
if (currentTheme === "dark") {
    document.body.classList.add("dark-theme");
}
themeToggleBtn.addEventListener("click", function () {
    document.body.classList.toggle("dark-theme");
    if (document.body.classList.contains("dark-theme")) {
    localStorage.setItem("theme", "dark");
    } else {
    localStorage.setItem("theme", "light");
    }
});
</script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.6.2/fuse.min.js"></script>

<script>

document.getElementById('menu-toggle').addEventListener('click', function () {
    const nav = document.getElementById('main-nav');
    nav.classList.toggle('active'); 
});


document.addEventListener('click', function(e) {
    const nav = document.getElementById('main-nav');
    const menuToggle = document.getElementById('menu-toggle');
    if (nav.classList.contains('active') && 
        !nav.contains(e.target) && 
        !menuToggle.contains(e.target)) {
        nav.classList.remove('active');
    }
});

let lastScrollPosition = 0;
const header = document.querySelector('.site-header');

window.addEventListener('scroll', () => {
    const currentScrollPosition = window.scrollY;

    if (currentScrollPosition > lastScrollPosition && currentScrollPosition > 100) {
        
        header.style.transform = 'translateY(-100%)';
    } else {
        
        header.style.transform = 'translateY(0)';
    }

    lastScrollPosition = currentScrollPosition;
});
</script>


<script>
const themeToggleBtn = document.getElementById("toggle-theme");
const currentTheme = localStorage.getItem("theme");
if (currentTheme === "dark") {
    document.body.classList.add("dark-theme");
}
themeToggleBtn.addEventListener("click", function () {
    document.body.classList.toggle("dark-theme");
    if (document.body.classList.contains("dark-theme")) {
        localStorage.setItem("theme", "dark");
    } else {
        localStorage.setItem("theme", "light");
    }
});
</script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.6.2/fuse.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function() {
  
  const searchInputs = document.querySelectorAll(".search-input");
  if (searchInputs.length === 0) return;

  
  fetch("/index.json")
    .then(response => response.json())
    .then(data => {
      const options = {
        keys: ['title', 'summary', 'category', 'content'],
        includeScore: true,
        includeMatches: true,
        threshold: 0.4, 
      };
      const fuse = new Fuse(data, options);

      
      function handleSearchInput(e) {
        const input = e.target;
        
        const resultsContainer = input.nextElementSibling;
        const query = input.value.trim();
        resultsContainer.innerHTML = "";
        if (query.length < 2) {
          resultsContainer.style.display = "none";
          return;
        }
        resultsContainer.style.display = "block";
        
        resultsContainer.style.width = "400px";

        const fuseResults = fuse.search(query);

        
        fuseResults.slice(0, 5).forEach(result => {
          const item = result.item;
          let snippetHTML = "";
          if (result.matches && Array.isArray(result.matches)) {
            for (const match of result.matches) {
              if (match.indices && match.indices.length > 0) {
                const fieldName = match.key;
                const fieldText = item[fieldName] || "";
                if (fieldText) {
                  const [start, end] = match.indices[0];
                  const contextBefore = 30;
                  const contextAfter = 30;
                  const snippetStart = Math.max(0, start - contextBefore);
                  const snippetEnd = Math.min(fieldText.length, end + contextAfter);
                  let snippet = fieldText.substring(snippetStart, snippetEnd);
                  if (snippetStart > 0) {
                    snippet = "..." + snippet;
                  }
                  if (snippetEnd < fieldText.length) {
                    snippet = snippet + "...";
                  }
                  const matchText = fieldText
                    .substring(start, end + 1)
                    .replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                  const regexHighlight = new RegExp("(" + matchText + ")", "gi");
                  snippetHTML = snippet.replace(regexHighlight, "<strong>$1</strong>");
                  break; 
                }
              }
            }
          }
          
          const div = document.createElement("div");
          div.style.marginBottom = "1rem";
          div.innerHTML = `
            <a href="${item.url}" style="text-decoration: none;">
              <strong style="color:#000">${item.title}</strong>
              <div style="font-size: 0.8rem; font-weight: normal; color: #444; margin-top: 0.25rem;">
                ${snippetHTML}
              </div>
            </a>
          `;
          resultsContainer.appendChild(div);
        });
        
        if (fuseResults.length === 0) {
          resultsContainer.innerHTML = "<p style=\"color:#333\">Δεν βρέθηκαν αποτελέσματα.</p>";
        }
      }
      
      
      searchInputs.forEach(input => {
        input.addEventListener("input", handleSearchInput);
        input.addEventListener("focus", function(){
          if (input.value.trim().length >= 2) {
            input.nextElementSibling.style.display = "block";
          }
        });
      });
      
      
      document.addEventListener("click", function(e) {
        searchInputs.forEach(input => {
          const resultsContainer = input.nextElementSibling;
          if (!input.contains(e.target) && !resultsContainer.contains(e.target)) {
            resultsContainer.style.display = "none";
          }
        });
      });
    })
    .catch(err => console.error("Error loading search index:", err));
});
</script>
  

</body>
</html>
